<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Review Generator (Hair Salon)</title>
    <style>
        :root { --bg-color: #f9fafb; --card-bg: #ffffff; --text-main: #111827; --text-sub: #6b7280; --accent: #111827; --border: #e5e7eb; --radius: 12px; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: var(--bg-color); padding: 20px; text-align: center; color: var(--text-main); line-height: 1.6; margin: 0; }
        .container { max-width: 420px; margin: 0 auto; }
        .card { background: var(--card-bg); padding: 30px 24px; border-radius: 24px; box-shadow: 0 4px 20px rgba(0,0,0,0.03); margin-bottom: 20px; }
        .logo-img { max-width: 280px; width: 100%; height: auto; display: block; margin: 0 auto 10px auto; }
        #shop-name-display { font-size: 0.9rem; color: var(--text-sub); margin-bottom: 30px; display: block; font-weight: normal; }
        h2 { font-size: 0.9rem; color: var(--text-sub); margin-bottom: 12px; text-align: left; font-weight: 600; display: flex; align-items: center; gap: 8px; margin-top: 0; }
        h2 span { font-size: 0.75rem; font-weight: normal; background: #f3f4f6; padding: 2px 8px; border-radius: 4px; color: #4b5563; }
        .section { margin-bottom: 36px; }
        .btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .choice-btn { padding: 12px 8px; border: 1px solid var(--border); border-radius: var(--radius); background: #fff; cursor: pointer; user-select: none; font-size: 0.9rem; font-weight: 500; color: var(--text-main); transition: all 0.2s ease; display: flex; align-items: center; justify-content: center; min-height: 48px; width: 100%; box-sizing: border-box; }
        .choice-btn:active { transform: scale(0.98); }
        .choice-btn.selected { background-color: var(--accent); color: white; border-color: var(--accent); }
        .choice-btn.negative { color: var(--text-sub); font-size: 0.85rem; border-style: dashed; }
        .choice-btn.negative.selected { background-color: #4b5563; border-color: #4b5563; color: white; border-style: solid; }
        .free-text-area { width: 100%; padding: 16px; border: 1px solid var(--border); border-radius: var(--radius); font-size: 1rem; box-sizing: border-box; background-color: #f9fafb; resize: vertical; min-height: 100px; font-family: inherit; transition: border 0.2s; }
        .free-text-area:focus { outline: none; border-color: var(--accent); background-color: #fff; }
        .note { text-align: right; font-size: 0.75rem; color: var(--text-sub); margin-top: 6px; margin-bottom: 0; }
        #generate-btn { background: var(--accent); color: white; border: none; padding: 18px; font-size: 1rem; border-radius: 50px; cursor: pointer; width: 100%; font-weight: 600; letter-spacing: 0.05em; transition: opacity 0.3s; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        #generate-btn:hover { opacity: 0.9; }
        #generate-btn:disabled { background: #d1d5db; box-shadow: none; cursor: not-allowed; }
        #result-wrapper { margin-top: 30px; text-align: left; display: none; }
        #result-area { width: 100%; min-height: 150px; border: 1px solid var(--border); background: #f9fafb; padding: 16px; border-radius: var(--radius); font-size: 1rem; color: var(--text-main); line-height: 1.7; resize: none; box-sizing: border-box; font-family: inherit; }
        #result-area:focus { outline: none; border-color: var(--accent); }
        .copy-btn { background: white; color: var(--text-main); border: 1px solid var(--border); padding: 12px; border-radius: var(--radius); cursor: pointer; width: 100%; font-weight: 600; font-size: 0.9rem; margin-top: 10px; display: flex; align-items: center; justify-content: center; gap: 8px; transition: background 0.2s; }
        .copy-btn:active { background-color: #f3f4f6; }
        .reload-link { font-size: 0.8rem; color: #6b7280; text-decoration: underline; cursor: pointer; margin-bottom: 20px; display: inline-block; }
    </style>
</head>
<body>
<div class="container">
    <div class="card">
        <img src="reviewlogo.png" alt="REVIEW GENERATOR" class="logo-img">
        <span id="shop-name-display"></span>
        <div onclick="location.reload()" class="reload-link">â†» é …ç›®ã‚’å…¥ã‚Œæ›¿ãˆã‚‹</div>
        <div class="section">
            <h2>01. æ¥åº—å›æ•°</h2>
            <div class="btn-grid" id="visit-group">
                <div class="choice-btn" onclick="toggleUnique(this)">åˆã‚ã¦</div>
                <div class="choice-btn" onclick="toggleUnique(this)">ãƒªãƒ”ãƒ¼ã‚¿ãƒ¼</div>
            </div>
        </div>
        <div class="section">
            <h2>02. æ€§åˆ¥</h2>
            <div class="btn-grid" id="gender-group">
                <div class="choice-btn" onclick="toggleUnique(this)">ç”·æ€§</div>
                <div class="choice-btn" onclick="toggleUnique(this)">å¥³æ€§</div>
                <div class="choice-btn" onclick="toggleUnique(this)">å›ç­”ã—ãªã„</div>
            </div>
        </div>
        <div class="section">
            <h2>03. ãƒ¡ãƒ‹ãƒ¥ãƒ¼ <span>è¤‡æ•°å¯</span></h2>
            <div class="btn-grid" id="menu-group">
                <div class="choice-btn" onclick="toggle(this)">ã‚«ãƒƒãƒˆ</div>
                <div class="choice-btn" onclick="toggle(this)">ã‚«ãƒ©ãƒ¼</div>
                <div class="choice-btn" onclick="toggle(this)">ãƒ‘ãƒ¼ãƒ</div>
                <div class="choice-btn" onclick="toggle(this)">ãƒˆãƒªãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ</div>
                <div class="choice-btn" onclick="toggle(this)">ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼</div>
                <div class="choice-btn" onclick="toggle(this)">ãƒ˜ãƒƒãƒ‰ã‚¹ãƒ‘</div>
            </div>
        </div>
        <div class="section">
            <h2>04. é›°å›²æ°— <span>è¤‡æ•°å¯</span></h2>
            <div class="btn-grid" id="vibe-group"></div>
        </div>
        <div class="section">
            <h2>05. æ„Ÿæƒ³ <span>è¤‡æ•°å¯</span></h2>
            <div class="btn-grid" id="impression-group"></div>
        </div>
        <div class="section">
            <h2>06. è‡ªç”±è¨˜è¿° <span>ä»»æ„</span></h2>
            <textarea id="free-text" class="free-text-area" placeholder="ä¾‹ï¼šæ‹…å½“ã€‡ã€‡ã•ã‚“&#13;&#10;ã€€ã€€ç‰¹ã«ã“ã“ãŒè‰¯ã‹ã£ãŸï¼&#13;&#10;ã€€ã€€ã“ã“ã‚’æ”¹å–„ã—ã¦ã»ã—ã„"></textarea>
            <p class="note">AIãŒã“ã®å†…å®¹ã‚’å„ªå…ˆã—ã¦ä½œæˆã—ã¾ã™</p>
        </div>
        <button id="generate-btn" onclick="generateReview()">å£ã‚³ãƒŸã‚’ä½œæˆã™ã‚‹</button>
        <div id="result-wrapper">
            <hr style="border:none; border-top:1px solid #e5e7eb; margin: 20px 0;">
            <textarea id="result-area" readonly></textarea>
            <button class="copy-btn" onclick="copyText()"><span>ğŸ“‹ ã‚³ãƒ”ãƒ¼ã—ã¦ãƒãƒƒãƒ—ã‚’é–‹ã</span></button>
        </div>
    </div>
</div>
<script>
    const SHOP_LIST = {
        "takadanobaba": { name: "é«˜ç”°é¦¬å ´åº—", url: "https://g.page/r/Ca06vI3qoB4eEBM/review" },
        "shinjyukunishi": { name: "æ–°å®¿è¥¿å£åº—", url: "https://g.page/r/CVYmMLMjd4IkEBM/review" },
        "kitasenjyu": { name: "åŒ—åƒä½åº—", url: "https://g.page/r/CdMfiFO0NGXPEBM/review" },
        "ueno": { name: "ä¸Šé‡åº—", url: "https://g.page/r/CW856cOeUiPTEBM/review" },
        "kameido": { name: "äº€æˆ¸åº—", url: "https://g.page/r/CTylqAAfbYSVEBM/review" },
        "akihabara": { name: "ç§‹è‘‰åŸåº—", url: "https://g.page/r/CdSpIPYQNfI3EBM/review" },
        "shinookubo": { name: "æ–°å¤§ä¹…ä¿åº—", url: "https://g.page/r/Cek1pivUOzaAEBM/review" },
        "touyoutyou": { name: "æ±é™½ç”ºåº—", url: "https://g.page/r/CaNDj_CbOZy6EBM/review" },
        "nishinippori": { name: "è¥¿æ—¥æš®é‡Œåº—", url: "https://g.page/r/Cbp8UbQ4OX8KEBM/review" },
        "asakusa": { name: "æµ…è‰åº—", url: "https://g.page/r/CSWqNhzEEPd0EBM/review" },
        "harajyuku": { name: "åŸå®¿åº—", url: "https://g.page/r/CZi8NiHEjQ5nEBM/review" },
        "asakusabashi": { name: "æµ…è‰æ©‹åº—", url: "https://g.page/r/CWWPkVvPp1RjEBM/review" },
        "kasai": { name: "è‘›è¥¿åº—", url: "https://g.page/r/Cfq-Mx8ZLz3gEBM/review" },
        "kawaguchi": { name: "å·å£åº—", url: "https://g.page/r/CfUcADsunSmOEBM/review" },
        "senngoku": { name: "åƒçŸ³åº—", url: "https://g.page/r/CZfIQz6kLFf1EBM/review" },
        "okachimachi": { name: "å¾¡å¾’ç”ºåº—", url: "https://g.page/r/CbrMlrsshkdMEBM/review" },
        "nahakokusai": { name: "é‚£è¦‡å›½éš›é€šã‚Šåº—", url: "https://g.page/r/CR-GziBOrQuqEBM/review" },
        "EX": { name: "EXç§‹è‘‰åŸ", url: "https://g.page/r/CXS7MNm0pV-TEBM/review" },
        "kawagoe": { name: "å·è¶Šåº—", url: "https://g.page/r/CUQDRPmrzHG9EBM/review" },
        "komagome": { name: "é§’è¾¼åº—", url: "https://g.page/r/Cc1DLTOK5AdCEBM/review" },
        "kamisyakujii": { name: "ä¸ŠçŸ³ç¥äº•åº—", url: "https://g.page/r/Cce3OD9W7yL6EBM/review" },
        "aiquickokachimachi": { name: "AiQuickå¾¡å¾’ç”ºåº—", url: "https://g.page/r/CXvbOqvTAtt0EBM/review" },
        "harajyuku": { name: "LABOåŸå®¿åº—", url: "https://g.page/r/CZi8NiHEjQ5nEBM/review" },
        "matsugeasakusa": { name: "ã¾ã¤æ¯›ã‚¨ã‚¯ã‚¹ãƒ†æµ…è‰åº—", url: "https://g.page/r/CaBN7ps69SwwEBM/review" },
        "matsugekasai": { name: "ã¾ã¤æ¯›ã‚¨ã‚¯ã‚¹ãƒ†è‘›è¥¿åº—", url: "https://g.page/r/CTR25Dh5oqj7EBM/review" },
        "matsugetouyoutyou": { name: "ã¾ã¤æ¯›ã‚¨ã‚¯ã‚¹ãƒ†æ±é™½ç”ºåº—", url: "https://g.page/r/CUU9qxUsUddWEBM/review" },
        "kururiueno": { name: "ãã‚‹ã‚Šä¸Šé‡åº—", url: "https://g.page/r/Cf3lTj5F6awZEBM/review" },
        "kururiokachimachi": { name: "ãã‚‹ã‚Šå¾¡å¾’ç”ºåº—", url: "https://g.page/r/CcnrF8DYxS4GEBM/review" },
        "aiquickharajyuku": { name: "AiQuickåŸå®¿åº—", url: "https://g.page/r/Cb20RyX3N3LJEBM/review" },
        "aiquickueno": { name: "AiQuickä¸Šé‡åº—", url: "https://g.page/r/CT_5l1aVs-LJEBM/review" },
        "aiquickkameido": { name: "AiQuickäº€æˆ¸åº—", url: "https://g.page/r/CQ9YnWBlQmnCEBM/review" },
        "aiquickkomagome": { name: "AiQuické§’è¾¼åº—", url: "https://g.page/r/CRwGDuOV1LGJEBM/review" },
        "aiquickakihabara": { name: "AiQuickç§‹è‘‰åŸåº—", url: "https://g.page/r/Cfb5KhKK8ad9EBM/review" },
        "aiquickkawaguchi": { name: "AiQuickå·å£åº—", url: "https://g.page/r/CbqwnaS3bwRmEBM/review" },
        "aiquicknaha": { name: "AiQuické‚£è¦‡åº—", url: "https://g.page/r/CZJfE_q1nmwgEBM/review" },
        "aiquicknishinippori": { name: "AiQuickè¥¿æ—¥æš®é‡Œåº—", url: "https://g.page/r/CZzH_2t6jOZgEBM/review" },
        "aiquickkitasenjyu": { name: "AiQuickåŒ—åƒä½åº—", url: "https://g.page/r/CcnUCdG1ajNrEBM/review" },
        "aiquickbaba": { name: "AiQuické«˜ç”°é¦¬å ´åº—", url: "https://g.page/r/CY3xcYF71qeaEBM/review" },
        "aiquickshinjyuku": { name: "AiQuickæ–°å®¿åº—", url: "https://g.page/r/CbftY9YGO0hbEBM/review" },
        "aiquickkashiwa": { name: "AiQuickæŸåº—", url: "https://g.page/r/CQLLr9eHoQUkEBM/review" },
        "aiquickkawagoe": { name: "AiQuickå·è¶Šåº—", url: "https://g.page/r/CXZFoKKZ6PZbEBM/review" },
        "browartueno": { name: "browartä¸Šé‡åº—", url: "https://g.page/r/CflhGtygEANWEBM/review" },
        "eyeasakusabashi": { name: "ã‚¢ã‚¤ãƒ–ãƒ­ã‚¦ ãƒ‘ãƒªã‚¸ã‚§ãƒ³ãƒŒ ã¾ã¤æ¯›ãƒ‘ãƒ¼ãƒå°‚é–€åº—Ai", url: "https://g.page/r/CZi8BBzOST26EBM/review" },
        "aibrowasakusabashi": { name: "çœ‰æ¯›ã‚µãƒ­ãƒ³ai brow æµ…è‰æ©‹åº—", url: "https://g.page/r/CarFVZABN4tWEBM/review" },
        "ganeshanishinippori": { name: "ã‚¬ãƒãƒ¼ã‚·ãƒ£ã®ã†ãŸãŸå¯è¥¿æ—¥æš®é‡Œåº—", url: "https://g.page/r/CVR2lw6RjjEyEBM/review" },
        "ganeshaueno": { name: "ã‚¬ãƒãƒ¼ã‚·ãƒ£ã®ã†ãŸãŸå¯ä¸Šé‡åº—", url: "https://g.page/r/CV4aJYiNw8mQEBM/review" },
        "ganeshaakihabara": { name: "ã‚¬ãƒãƒ¼ã‚·ãƒ£ã®ã†ãŸãŸå¯ç§‹è‘‰åŸåº—", url: "https://g.page/r/CcuyfN-mhUUhEBM/review" },
        "ganeshaokachimachi": { name: "ã‚¬ãƒãƒ¼ã‚·ãƒ£ã®ã†ãŸãŸå¯å¾¡å¾’ç”ºåº—", url: "https://g.page/r/CRr1irL3P7a_EBM/review" },
        "ganeshakashiwa": { name: "ã‚¬ãƒãƒ¼ã‚·ãƒ£ã®ã†ãŸãŸå¯æŸåº—", url: "https://g.page/r/CblGx0-wuWvfEBM/review" },
        "ãƒ€ãƒŸãƒ¼": { name: "ã€‡åº—", url: "https://g.page/r/AAAA" },
    };

    const POOL_VIBE = [
    "è½ã¡ç€ã", "æ¸…æ½”æ„Ÿã‚ã‚Š", "ã‚ªã‚·ãƒ£ãƒ¬", "ãƒªã‚¾ãƒ¼ãƒˆé¢¨", "é–‹æ”¾çš„", "ãƒ¢ãƒ€ãƒ³", "ã‚¢ãƒ³ãƒ†ã‚£ãƒ¼ã‚¯", "æœ¨ã®æ¸©ã‚‚ã‚Š", "ã‚¹ã‚¿ã‚¤ãƒªãƒƒã‚·ãƒ¥", "éš ã‚Œå®¶é¢¨", 
    "ç·‘ãŒè±Šå¯Œ", "åºƒã€…ç©ºé–“", "ç¶ºéº—ãªå†…è£…", "æ˜ã‚‹ã„åº—å†…", "é–“æ¥ç…§æ˜", "è±ªè¯ãªå†…è£…", "å±…å¿ƒåœ°æœ€é«˜", "é«˜ç´šæ„Ÿã‚ã‚Š", "ã‚¢ãƒƒãƒˆãƒ›ãƒ¼ãƒ ", "ç™’ã‚„ã—ç©ºé–“", 
    "ã‚«ãƒ•ã‚§é¢¨", "éæ—¥å¸¸çš„", "æ´—ç·´ã•ã‚ŒãŸ", "çµ±ä¸€æ„Ÿã‚ã‚Š", "æ•´ç†æ•´é “", "é¡ãŒç¶ºéº—", "å¤©äº•ãŒé«˜ã„", "æ—¥å½“ãŸã‚Šè‰¯å¥½", "ã‚»ãƒ³ã‚¹æŠœç¾¤", "è½ã¡ç€ãè‰²å‘³", 
    "ãƒ•ã‚¯ãƒ­ã‚¦ç™’ã‚„ã—", "æ´çªŸé¢¨ãƒ–ãƒ¼ã‚¹", "ç‹¬ç‰¹ã®ä¸–ç•Œè¦³", "åœ§è¿«æ„Ÿãªã—", "å±…å¿ƒåœ°ãŒè‰¯ã„", "ä¸å¯§ãªæ¥å®¢", "ã‚¹ã‚¿ãƒƒãƒ•è¦ªåˆ‡", "ç¬‘é¡”ãŒè‰¯ã„", "ç›¸è«‡ã—ã‚„ã™ã„", "èª¬æ˜ãŒä¸å¯§", 
    "è·é›¢æ„ŸãŒçµ¶å¦™", "æ´»æ°—ãŒã‚ã‚‹", "ä»²ãŒè‰¯ã•ãã†", "è¿…é€Ÿãªå¯¾å¿œ", "é€£æºãŒè‰¯ã„", "æ‰‹éš›ãŒè‰¯ã„", "ç„¡é§„ãŒãªã„", "æŠ¼ã—å£²ã‚Šãªã—", "å®‰å¿ƒæ„Ÿã‚ã‚Š", "æ˜æœ—ä¼šè¨ˆ", 
    "ã‚µãƒ¼ãƒ“ã‚¹æº€ç‚¹", "ãƒ‰ãƒªãƒ³ã‚¯å……å®Ÿ", "ãŠè¦‹é€ã‚Šã‚ã‚Š", "è·ç‰©é ã‘æ¥½", "å¯„ã‚Šæ·»ã†æ¥å®¢", "å¨åœ§æ„Ÿãªã—", "ãƒ—ãƒ­ã®å“æ ¼", "æŸ”ã‚‰ã‹ã„ç‰©è…°", "ä¸å¯§ãªãƒ’ã‚¢ãƒªãƒ³ã‚°", "æ°—é…ã‚Šä¸Šæ‰‹", 
    "è©±ã—ã‚„ã™ã„", "é™ã‹ã«éã”ã›ã‚‹", "ãƒ›ã‚¹ãƒ”ã‚¿ãƒªãƒ†ã‚£", "æ¸©ã‹ã„é›°å›²æ°—", "ä¿¡é ¼ã§ãã‚‹", "æ„Ÿã˜ãŒè‰¯ã„", "åˆã‚ã¦ã§ã‚‚å®‰å¿ƒ", "éå‰°ã™ããªã„", "å¿ƒåœ°ã‚ˆã„ä¼šè©±", "çµ‚å§‹ãƒªãƒ©ãƒƒã‚¯ã‚¹", 
    "é§…ã‹ã‚‰ã‚¹ã‚°", "äºˆç´„ãŒæ¥½", "å½“æ—¥äºˆç´„OK", "å¾…ã¡æ™‚é–“ãªã—", "ç«‹åœ°ãŒè‰¯ã„", "ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼æ¥½", "ãƒãƒƒã‚µãƒ¼ã‚¸è‰¯", "æ¤…å­ãŒå¿«é©", "ãƒˆã‚¤ãƒ¬ãŒç¶ºéº—", "æœ€æ–°ã®è¨­å‚™", 
    "ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼å®¤æš—ã‚", "å€‹å®¤æ„Ÿã‚ã‚Š", "ã‚¦ã‚§ã‚¤ãƒ†ã‚£ãƒ³ã‚°åºƒ", "ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆä»˜", "å……é›»å¯èƒ½", 
    { text: "å¾…ã¡æ™‚é–“é•·ã„", type: "negative" }, { text: "è–¬å‰¤ã®åŒ‚ã„", type: "negative" }, { text: "å°‘ã—é¨’ãŒã—ã„", type: "negative" }, { text: "BGMå¤§ãã„", type: "negative" }, 
    { text: "ç…§æ˜ãŒçœ©ã—ã„", type: "negative" }, { text: "æ¤…å­ãŒç¡¬ã„", type: "negative" }, { text: "æ¸…æƒä¸è¶³", type: "negative" }, { text: "æ¡ˆå†…ãŒé…ã„", type: "negative" }, 
    { text: "å ´æ‰€ãŒé›£è§£", type: "negative" }, { text: "ç§èªãŒæ°—ã«ãªã‚‹", type: "negative" }, { text: "éš£ã¨è¿‘ã„", type: "negative" }, { text: "åº—å†…ãŒå¯’ã„", type: "negative" }, 
    { text: "åº—å†…ãŒæš‘ã„", type: "negative" }, { text: "èª¬æ˜ä¸è¶³", type: "negative" }, { text: "ä¼šè¨ˆã§å¾…ã¤", type: "negative" }
];
    const POOL_IMPRESSION = [
    "ç†æƒ³é€šã‚Š", "ã‚¤ãƒ¡ãƒ¼ã‚¸é€šã‚Š", "å¤§æº€è¶³", "å®Œç’§ãªå½¢", "å¢æŠœã‘ãŸ", "è‹¥è¿”ã£ãŸ", "å°é¡”ã«è¦‹ãˆã‚‹", "å‰é«ªãŒè‰¯ã„", "çµ¶å¦™ãªé•·ã•", "ä¼¼åˆã‚ã›ã‚«ãƒƒãƒˆ", 
    "æœŸå¾…ä»¥ä¸Š", "é€æ˜æ„ŸãŒå‡ºãŸ", "è‰¶ã€…ã«ãªã£ãŸ", "è‰²ã®ã‚Šæœ€é«˜", "ç¶ºéº—ãªç™ºè‰²", "ãƒ ãƒ©ãŒãªã„", "è‡ªç„¶ãªä»•ä¸ŠãŒã‚Š", "ã‚«ãƒ¼ãƒ«ãŒç¶ºéº—", "æ ¹å…ƒãµã‚“ã‚ã‚Š", "åã¾ã‚ŠãŒè‰¯ã„", 
    "ãƒ•ã‚©ãƒ«ãƒ ãŒç¶ºéº—", "æ‰±ã„ã‚„ã™ã„", "å·¦å³ãƒãƒ©ãƒ³ã‚¹è‰¯ã„", "ãƒ•ã‚§ã‚¤ã‚¹ãƒ©ã‚¤ãƒ³è‰¯ã„", "è¥Ÿè¶³ã‚¹ãƒƒã‚­ãƒª", "å¢æŠœã‘ã‚«ãƒ©ãƒ¼", "é€ã‘æ„Ÿã‚«ãƒ©ãƒ¼", "ç†æƒ³ã®ç™½é«ªæŸ“ã‚", "è‡ªç„¶ãªã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ", "ãƒ„ãƒ¤ãŒå‡ºãŸ", 
    "ã¾ã¨ã¾ã‚ŠãŒè‰¯ã„", "è»½ã‚„ã‹ã«ãªã£ãŸ", "ç«‹ä½“æ„ŸãŒå‡ºãŸ", "è‰²è½ã¡ã‚‚æ¥½ã—ã¿", "å®Œç’§ãªä»•ä¸ŠãŒã‚Š", "æŒ‡é€šã‚ŠãŒè‰¯ã„", "ã•ã‚‰ã•ã‚‰", "ã—ã£ã¨ã‚Š", "é«ªãŒç”Ÿãè¿”ã£ãŸ", "æ‰‹è§¦ã‚Šæœ€é«˜", 
    "ãƒ€ãƒ¡ãƒ¼ã‚¸è»½æ¸›", "æ½¤ã„ãŒã‚ã‚‹", "æŸ”ã‚‰ã‹ã„è³ªæ„Ÿ", "ãƒãƒªã‚³ã‚·ãŒå‡ºãŸ", "ã‚´ãƒ¯ã¤ãè§£æ¶ˆ", "ãƒ‘ã‚µã¤ãæ”¹å–„", "åºƒãŒã‚ŠãŒåã¾ã£ãŸ", "ã‚µãƒ©ã‚µãƒ©å¾©æ´»", "é«ªè³ªãŒå¤‰ã‚ã£ãŸ", "ã‚±ã‚¢æ–¹æ³•ã«ç´å¾—", 
    "ä¸å¯§ãªæ–½è¡“", "æŠ€è¡“ãŒé«˜ã„", "ã‚¢ã‚¤ãƒ­ãƒ³ã„ã‚‰ãš", "ã‚»ãƒƒãƒˆãŒæ¥½", "æœã®æ™‚çŸ­", "é«ªãŒè»½ã„", "ç—›ã¿ãŒæ¶ˆãˆãŸ", "ææ¯›ãŒç›®ç«‹ãŸãªã„", "è‰¶é«ªã«ãªã£ãŸ", "è§¦ã‚‹ã®ãŒæ¥½ã—ã„", 
    "è¤’ã‚ã‚‰ã‚ŒãŸ", "å‘¨ã‚Šã«å¥½è©•", "è©•åˆ¤ãŒè‰¯ã„", "è‡ªä¿¡ãŒæŒã¦ã‚‹", "ãƒ†ãƒ³ã‚·ãƒ§ãƒ³UP", "æ¯æ—¥ãŒæ¥½ã—ã„", "é€šã„ç¶šã‘ãŸã„", "ã¾ãŸãŠé¡˜ã„ã—ãŸã„", "ãƒªãƒ”ãƒ¼ãƒˆç¢ºå®š", "ãŠã™ã™ã‚ã§ãã‚‹", 
    "ç´¹ä»‹ã—ãŸã„", "æ„Ÿå‹•ã—ãŸ", "ä¿¡é ¼ã§ãã‚‹", "ã‚³ã‚¹ãƒ‘ãŒè‰¯ã„", "ç´å¾—ã®ä¾¡æ ¼", "ãŠå¾—æ„Ÿã‚ã‚Š", "ã‚¿ã‚¤ãƒŸãƒ³ã‚°è‰¯ã„", "ç–²ã‚ŒãŒå–ã‚ŒãŸ", "ç™’ã‚„ã•ã‚ŒãŸ", "å‹‡æ°—ã‚’å‡ºã—ã¦æ­£è§£", 
    { text: "ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨é•ã†", type: "negative" }, { text: "åˆ‡ã‚Šã™ããŸ", type: "negative" }, { text: "è‰²ãŒæ¿ƒã™ããŸ", type: "negative" }, { text: "è‰²è½ã¡ãŒæ—©ã„", type: "negative" }, 
    { text: "ãƒ‘ãƒ¼ãƒå–ã‚ŒãŸ", type: "negative" }, { text: "æŒ‡é€šã‚Šæ‚ªã„", type: "negative" }, { text: "ãƒ‘ã‚µã¤ãæ®‹ã‚‹", type: "negative" }, { text: "å·¦å³éå¯¾ç§°", type: "negative" }, 
    { text: "ã‚»ãƒƒãƒˆã—ã«ãã„", type: "negative" }, { text: "æŸ“ã¿ãŸãƒ»ç—›ã„", type: "negative" }, { text: "æœŸå¾…å¤–ã‚Œ", type: "negative" }, { text: "ã‚³ã‚¹ãƒ‘æ‚ªã„", type: "negative" }, 
    { text: "æ™‚é–“ãŒã‹ã‹ã£ãŸ", type: "negative" }, { text: "èª¬æ˜ãŒä¸ååˆ†", type: "negative" }, { text: "ä¼šè©±ãŒç–²ã‚ŒãŸ", type: "negative" }, { text: "é›‘ãªæ„Ÿã˜", type: "negative" }, 
    { text: "ãƒ ãƒ©ãŒã‚ã‚‹", type: "negative" }, { text: "åºƒãŒã‚Šæ°—ã«ãªã‚‹", type: "negative" }, { text: "ã‚‚ã†è¡Œã‹ãªã„", type: "negative" }, { text: "é‡‘é¡ãŒé•ã£ãŸ", type: "negative" }
];

    let currentShopUrl = "", currentShopName = "ç¾å®¹å®¤";

    function getRandomItems(pool, count) { return [...pool].sort(() => 0.5 - Math.random()).slice(0, count); }
    function renderButtons(containerId, items) {
        const container = document.getElementById(containerId);
        container.innerHTML = "";
        items.forEach(item => {
            const div = document.createElement("div");
            div.className = "choice-btn";
            div.onclick = function() { toggle(this); };
            if (typeof item === 'string') { div.innerText = item; }
            else { div.innerText = item.text; if (item.type === 'negative') div.classList.add('negative'); }
            container.appendChild(div);
        });
    }

    window.onload = function() {
        const urlParams = new URLSearchParams(window.location.search);
        const shopId = urlParams.get('id');
        const shopDisplay = document.getElementById('shop-name-display');
        if (shopId && SHOP_LIST[shopId]) {
            currentShopName = SHOP_LIST[shopId].name;
            shopDisplay.innerText = currentShopName;
            currentShopUrl = SHOP_LIST[shopId].url;
        } else {
            shopDisplay.innerText = "åº—èˆ—æœªæŒ‡å®š";
            currentShopUrl = "";
            currentShopName = "ã“ã¡ã‚‰ã®ã‚µãƒ­ãƒ³";
        }
        renderButtons("vibe-group", getRandomItems(POOL_VIBE, 10));
        renderButtons("impression-group", getRandomItems(POOL_IMPRESSION, 10));
    };

    function toggle(element) { element.classList.toggle('selected'); }
    function toggleUnique(element) {
        const siblings = element.parentElement.children;
        for (let sib of siblings) sib.classList.remove('selected');
        element.classList.add('selected');
    }

    async function generateReview() {
        const btn = document.getElementById('generate-btn');
        const resultWrapper = document.getElementById('result-wrapper');
        const resultArea = document.getElementById('result-area');
        
        // é¸æŠã•ã‚ŒãŸé …ç›®ã®å–å¾—
        let visitsRaw = Array.from(document.querySelectorAll('#visit-group .selected')).map(el => el.innerText);
        let visitsForAi = visitsRaw.join(', ');

        const genderElement = document.querySelector('#gender-group .selected');
        const gender = genderElement ? genderElement.innerText : "";
        
        const menus = Array.from(document.querySelectorAll('#menu-group .selected')).map(el => el.innerText);
        const vibes = Array.from(document.querySelectorAll('#vibe-group .selected')).map(el => el.innerText);
        const impressions = Array.from(document.querySelectorAll('#impression-group .selected')).map(el => el.innerText);
        const freeText = document.getElementById('free-text').value;

        // å…¥åŠ›ãƒã‚§ãƒƒã‚¯
        if (visitsRaw.length === 0 && !gender && menus.length === 0 && freeText.trim() === "") {
            alert("é …ç›®ã‚’ã„ãã¤ã‹é¸æŠã™ã‚‹ã‹ã€è‡ªç”±è¨˜è¿°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
            return;
        }

        btn.disabled = true;
        btn.innerText = "ä½œæˆä¸­...";
        resultWrapper.style.display = "block";
        resultArea.value = "AIãŒè€ƒãˆä¸­...";
        resultArea.style.opacity = "0.5";

        // â˜…â˜…â˜… 1. æ¥åº—èƒŒæ™¯ãƒ»å­£ç¯€ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå‰å›ã¨åŒã˜ï¼‰ â˜…â˜…â˜…
        const dice = Math.random();
        let seasonPrompt = "";
        
        if (dice < 0.15) { // å­£ç¯€ï¼ˆå°‘ã—ç¢ºç‡ä¸Šã’ã¾ã—ãŸï¼‰
            const month = new Date().getMonth() + 1;
            let seasonThemes = [];
            // ç°¡æ˜“çš„ã«å››å­£ã§åˆ†å²
            if (month >= 3 && month <= 5) seasonThemes = ["æ˜¥ã®ã‚¤ãƒ¡ãƒã‚§ãƒ³", "èŠ±ç²‰ã‚„æ¹¿æ°—å¯¾ç­–", "æ–°ç”Ÿæ´»ã®æº–å‚™", "æš–ã‹ããªã£ãŸã®ã§è»½ãã—ãŸã„"];
            else if (month >= 6 && month <= 9) seasonThemes = ["å¤ã®æ¹¿æ°—å¯¾ç­–", "æš‘ã„ã®ã§ã‚µãƒƒãƒ‘ãƒªã—ãŸã„", "ç´«å¤–ç·šãƒ€ãƒ¡ãƒ¼ã‚¸ã‚±ã‚¢", "æ±—ã§å´©ã‚Œãªã„ã‚ˆã†ã«"];
            else if (month >= 10 && month <= 11) seasonThemes = ["ç§‹ã®ä¹¾ç‡¥å¯¾ç­–", "å¤ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ä¿®å¾©", "è½ã¡ç€ã„ãŸã‚«ãƒ©ãƒ¼ã«", "å†¬ã«å‘ã‘ã¦ä¼¸ã°ã—ãŸã„"];
            else seasonThemes = ["å†¬ã®ä¹¾ç‡¥ãƒ»é™é›»æ°—å¯¾ç­–", "å¹´æœ«ã®ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥", "å¯’ã•ã§å‡ã£ãŸé ­çš®ã‚±ã‚¢", "ã‚¤ãƒ™ãƒ³ãƒˆå‰ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹"];
            
            seasonPrompt = `å­£ç¯€èƒŒæ™¯ï¼š${seasonThemes[Math.floor(Math.random() * seasonThemes.length)]}ã®æ–‡è„ˆã§ã€‚`;
        } else if (dice < 0.6) { // èƒŒæ™¯ï¼ˆç¢ºç‡ä¸Šã’ã¾ã—ãŸï¼‰
            const contexts = [
                "ä»•äº‹å¸°ã‚Šã®ç–²ã‚Œç™’ã‚„ã—", "æ˜æ—¥å¤§äº‹ãªäºˆå®šãŒã‚ã‚‹", "è‡ªåˆ†ã¸ã®ã”è¤’ç¾", "æ€¥ã«æ™‚é–“ãŒç©ºã„ãŸ", 
                "ãªã‚“ã¨ãªãæ°—åˆ†è»¢æ›", "å‹äººã®çµå©šå¼å‰", "ãƒ‡ãƒ¼ãƒˆå‰", "æ—…è¡Œå‰", 
                "é¡ã‚’è¦‹ã¦é«ªã®ç—›ã¿ãŒæ°—ã«ãªã£ãŸ", "ãƒªãƒ©ãƒƒã‚¯ã‚¹ç›®çš„", "ä¹…ã—ã¶ã‚Šã®ä¼‘æ—¥"
            ];
            const randomContext = contexts[Math.floor(Math.random() * contexts.length)];
            seasonPrompt = `æ¥åº—å‹•æ©Ÿï¼š${randomContext}ã¨ã„ã†ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã§ã€‚`;
        }

        // ã€Œåˆã‚ã¦ã€ã®å ´åˆã®è£œè¶³
        if (visitsForAi.includes("åˆã‚ã¦")) {
            visitsForAi += "ï¼ˆãƒãƒƒãƒˆæ¤œç´¢ã‚„SNSã€çœ‹æ¿ã‚’è¦‹ã¦æ°—ã«ãªã£ã¦ã„ãŸç­‰ã€è‡ªç„¶ãªå‹•æ©Ÿã‚’ä»˜ä¸ï¼‰";
        }

        // â˜…â˜…â˜… 2. æ–‡ä½“ï¼ˆèªå°¾ãƒ»ãƒˆãƒ¼ãƒ³ï¼‰ã®å¼·åˆ¶æŒ‡å®š â˜…â˜…â˜…
        // ã“ã“ãŒä»Šå›ã®ã€Œä¼¼é€šã‚ã›ãªã„ã€ãŸã‚ã®æ ¸å¿ƒéƒ¨åˆ†ã§ã™ã€‚
        const writingStyles = [
            { name: "æ¨™æº–ãƒ»ä¸å¯§", instruction: "èªå°¾ã¯ã€ã€œã§ã™ã€ã€ã€œã¾ã™ã€ã€‚çŸ¥çš„ã§è½ã¡ç€ã„ãŸå¤§äººã®æ–‡ç« ã€‚æ„Ÿå˜†ç¬¦ï¼ˆï¼ï¼‰ã¯ä½¿ã‚ãªã„ã€‚" },
            { name: "æ„Ÿæƒ…è±Šã‹ãƒ»ã‚½ãƒ•ãƒˆ", instruction: "èªå°¾ã¯ã€ã€œã§ã—ãŸï¼ã€ã€ã€œãªã®ãŒå¬‰ã—ã„ã€ãªã©ã€‚å–œã³ã‚’ç´ ç›´ã«è¡¨ç¾ã™ã‚‹ã€‚å°‘ã—ãƒ†ãƒ³ã‚·ãƒ§ãƒ³é«˜ã‚ã€‚" },
            { name: "ãƒ•ãƒ©ãƒ³ã‚¯ãƒ»è¦ªã—ã¿", instruction: "ã€ã€œã ã£ãŸã€ã€ã€œã‹ã‚‚ã€ãªã©ã€å°‘ã—ç •ã‘ãŸè¡¨ç¾ã‚’æ··ãœã‚‹ã€‚å …è‹¦ã—ã•ã‚’æ’é™¤ã—ã€å‹äººã«è©±ã™ã‚ˆã†ãªè·é›¢æ„Ÿã§ã€‚" },
            { name: "çŸ­æ–‡ãƒ»ä½“è¨€æ­¢ã‚", instruction: "ã€ã‚«ãƒƒãƒˆæŠ€è¡“æœ€é«˜ã€‚ã€ã€åº—å†…ã®é›°å›²æ°—ã‚‚â—ã€ã®ã‚ˆã†ã«ã€ä½“è¨€æ­¢ã‚ã‚„çŸ­æ–‡ã‚’å¤šç”¨ã—ã€ãƒªã‚ºãƒ è‰¯ãã€‚ãƒ€ãƒ©ãƒ€ãƒ©æ›¸ã‹ãªã„ã€‚" },
            { name: "ç‹¬ç™½ãƒ»æ—¥è¨˜é¢¨", instruction: "ã€ã€œã ã¨æ€ã£ãŸã‘ã©ã€æ„å¤–ã¨ã€œã ã£ãŸã€‚ã€ã€ä¹…ã—ã¶ã‚Šã«ã€œã—ãŸã€‚ã€ã®ã‚ˆã†ãªã€è‡ªåˆ†ã®å†…é¢ã®ç‹¬ã‚Šè¨€ã®ã‚ˆã†ãªæ›¸ãå£ã€‚" },
            { name: "çµ¶è³›ãƒ»æ„Ÿå‹•", instruction: "ã€ã¨ã«ã‹ãã€‡ã€‡ãŒè‰¯ã„ã€ã€é–“é•ã„ãªã—ã€ãªã©ã€å¼·ã„è¨€è‘‰ã§æ¨å¥¨ã™ã‚‹ã€‚ç†±é‡ã®é«˜ã„ãƒ•ã‚¡ãƒ³ã€‚" }
        ];
        
        // æ€§åˆ¥ã«ã‚ˆã£ã¦é¸ã°ã‚Œã‚„ã™ã„æ–‡ä½“ã‚’é‡ã¿ä»˜ã‘ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ãŒã€
        // ã‚ãˆã¦ãƒ©ãƒ³ãƒ€ãƒ ã«ã™ã‚‹ã“ã¨ã§ã€Œæ„å¤–æ€§ã€ã‚’å‡ºã—ã¾ã™ã€‚
        const selectedStyle = writingStyles[Math.floor(Math.random() * writingStyles.length)];


        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆ
        const prompt = `
        ã‚ãªãŸã¯ç¾å®¹å®¤ã€Œ${currentShopName}ã€ã®ãŠå®¢æ§˜ã¨ã—ã¦ã€Googleãƒãƒƒãƒ—ã®å£ã‚³ãƒŸã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚
        ä»¥ä¸‹ã®ã€æ–‡ä½“æŒ‡å®šã€‘ã‚’æœ€é‡è¦è¦–ã—ã¦ã€ä»–äººã®å£ã‚³ãƒŸã¨è¢«ã‚‰ãªã„å€‹æ€§ã‚’å‡ºã—ã¦ãã ã•ã„ã€‚

        ã€æ€§åˆ¥ã€‘${gender || "æŒ‡å®šãªã—"}
        ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆèª­è€…ã€‘ã“ã‚Œã‹ã‚‰åº—é¸ã³ã‚’ã™ã‚‹äºº
        ã€èƒŒæ™¯ãƒ»å­£ç¯€ã€‘${seasonPrompt}
        
        ã€æ–‡ä½“æŒ‡å®šï¼ˆæœ€é‡è¦ï¼‰ã€‘
        ğŸ‘‰ ${selectedStyle.instruction}
        
        ã€é¸æŠã•ã‚ŒãŸè¦ç´ ã€‘
        æ¥åº—é »åº¦:${visitsForAi}
        ãƒ¡ãƒ‹ãƒ¥ãƒ¼:${menus.join(', ')}
        é›°å›²æ°—:${vibes.join(', ')}
        æ„Ÿæƒ³:${impressions.join(', ')}
        è‡ªç”±è¨˜è¿°:${freeText}

        ã€ç¦æ­¢äº‹é …ã€‘
        ãƒ»ã€Œæ¥å®¢ã‚‚è‰¯ãã€æŠ€è¡“ã‚‚ç´ æ™´ã‚‰ã—ã‹ã£ãŸã§ã™ã€ã®ã‚ˆã†ãªã€ã‚ã‚ŠããŸã‚Šãªã¾ã¨ã‚æ–¹ã¯ç¦æ­¢ã€‚
        ãƒ»ã€Œã¾ãŸè¡ŒããŸã„ã§ã™ã€ã¨ã„ã†å®šå‹æ–‡ã§ã®ç· ã‚ç¦æ­¢ã€‚ï¼ˆã€Œæ¬¡ã¯ã‚«ãƒ©ãƒ¼ã‚‚ãŠé¡˜ã„ã—ã¾ã™ã€ã‚„ã€Œæ¥æœˆã‚‚äºˆç´„ã—ã¾ã™ã€ãªã©å…·ä½“çš„ã«ã€ã¾ãŸã¯ç· ã‚ã®è¨€è‘‰ãªã—ã§çµ‚ã‚ã‚‹ï¼‰
        ãƒ»ã€Œç¾å®¹å®¤ã€ã¨ã„ã†å˜èªç¦æ­¢ã€‚ï¼ˆã‚µãƒ­ãƒ³ã€ã“ã“ã€ãŠåº—ã€ãªã©ã§ï¼‰
        ãƒ»çµµæ–‡å­—ä½¿ç”¨ç¦æ­¢ã€‚
        ãƒ»å…·ä½“çš„ãªè¨­å‚™ï¼ˆé›‘èªŒã€ãƒ‰ãƒªãƒ³ã‚¯ã®ç¨®é¡ãªã©ï¼‰ã¸ã®è¨€åŠç¦æ­¢ã€‚

        ã€åŸ·ç­†ãƒ«ãƒ¼ãƒ«ã€‘
        ãƒ»æ–‡å­—æ•°ã¯100æ–‡å­—ã€œ200æ–‡å­—ç¨‹åº¦ã€‚
        ãƒ»è‡ªç”±è¨˜è¿°ã®å†…å®¹ãŒã‚ã‚Œã°ã€ãã‚Œã‚’æ ¸ã«ã—ã¦æ–‡ç« ã‚’åºƒã’ã‚‹ã“ã¨ã€‚
        ãƒ»è‡ªç„¶ãªå£èªä½“ï¼ˆæ›¸ãè¨€è‘‰ã™ããªã„ã‚ˆã†ã«ï¼‰ã€‚
        `;

        try {
const response = await fetch("https://review-proxy.vercel.app/api/review"
, {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    gender,
    shopName,
    visitType,
    menus,
    vibes,
    impressions,
    staffName: name,
    goodPoint: rawName,
    badPoint: "",
    lengthHint: lengthInstruction
  })
});

const data = await response.json();
resultArea.value = data.text || "ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚";

            const data = await response.json();
            
            if (data.error) {
                resultArea.value = "ã‚¨ãƒ©ãƒ¼: " + data.error.message;
            } else {
                resultArea.value = data.choices[0].message.content;
            }
        } catch (error) {
            resultArea.value = "é€šä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚";
        }

        btn.disabled = false;
        btn.innerText = "å£ã‚³ãƒŸã‚’ä½œæˆã™ã‚‹";
        resultArea.style.opacity = "1";
        resultWrapper.scrollIntoView({ behavior: 'smooth' });
    }
    function copyText() {
        const copyText = document.getElementById("result-area");
        if (copyText.value.includes("AIãŒè€ƒãˆä¸­")) return;
        copyText.select(); document.execCommand("copy");
        if (confirm("æ–‡ç« ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼\n\nGoogleãƒãƒƒãƒ—ã‚’é–‹ã„ã¦è²¼ã‚Šä»˜ã‘ã¾ã™ã‹ï¼Ÿ")) {
            if (currentShopUrl) window.open(currentShopUrl, '_blank');
            else alert("åº—èˆ—URLãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚\næ‰‹å‹•ã§Googleãƒãƒƒãƒ—ã‚’é–‹ã„ã¦ãã ã•ã„ã€‚");
        }
    }
</script>
</body>
</html>
